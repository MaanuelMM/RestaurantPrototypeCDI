{% extends "base.html" %}

{% block content %}
<nav class="navbar navbar-expand-lg {% if customer %}navbar-light bg-light{% else %}navbar-dark bg-dark{% endif %} fixed-top"
    role="navigation" id="main-navbar">
    <div class="container-fluid">
        <a class="navbar-brand">
            <img src="/static/favicon.svg" alt="logo" style="width:64px">
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive"
            aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive"
            style="overflow-x:auto;overflow-y:hidden;flex-wrap:nowrap;">
            <ul class="nav nav-pills ml-auto{% if not customer %} warning{% endif %}" id="categoryFood" role="tablist"
                style="margin:16px;overflow-x:auto;overflow-y:hidden;flex-wrap:nowrap;">
                {% for category_item, category in categories.items() %}
                <li class="m-auto nav-item" style="margin-bottom:8px">
                    <a class="nav-link{% if category.active %} active{% endif %}" id="{{ category_item }}-tab"
                        data-toggle="tab" href="#{{ category_item }}" role="tab" aria-controls="{{ category_item }}"
                        aria-selected="true">
                        <h5>{{ category.name }}</h5>
                    </a>
                </li>
                {% endfor %}
            </ul>
        </div>
    </div>
</nav>

<div class="container-fluid">
    <div class="tab-content" id="categoryFoodContent" style="margin:36px">
        {% for category_item, category in categories.items() %}
        <div class="tab-pane fade{% if category.active %} show active{% endif %}" id="{{ category_item }}"
            role="tabpanel" aria-labelledby="{{ category_item }}-tab">
            <div class="row justify-content-center">
                {% for product_id, product in products.items() %}
                {% if product.category == category_item %}
                <div class="card" style="width:300px;margin:8px">
                    <img class="card-img-top" src="{{ product.pathImage }}" alt="{{ product.name }}"
                        style="cursor:pointer" onclick="onClick(this)">
                    <div class="d-flex flex-column card-body bg-light text-dark">
                        <h4 class="card-title text-center"><b>{{ product.name }}</b></h4>
                        <p class="mt-auto card-text text-center">{{ product.description }}</p>
                        <div class="mt-auto d-flex flex-column">
                            <h2 class="mt-auto mb-3 text-center"><b>
                                    {{ "%.2f" | format(product.price) }} €</span></b></h2>
                            {% if customer %}
                            {% if product.available %}
                            <a href="#" class="mt-auto btn btn-primary">Añadir</a>
                            {% else %}
                            <a class="mt-auto btn btn-outline-primary disabled" disabled>No disponible</a>
                            {% endif %}
                            {% else %}
                            {% if product.available %}
                            <span class="mt-auto mb-3 badge badge-pill badge-success">DISPONIBLE</span>
                            {% else %}
                            <span class="mt-auto mb-3 badge badge-pill badge-danger">NO DISPONIBLE</span>
                            {% endif %}
                            <form action="/waiter/products/list.html" method="POST">
                                <input type="hidden" name="current-category" value="{{ product.category }}">
                                <input type="hidden" name="product-id" value="{{ product_id }}">
                                <button type="submit" class="mt-auto btn btn-warning btn-block">Cambiar
                                    disponibilidad</button>
                            </form>
                            {% endif %}
                        </div>
                    </div>
                </div>
                {% endif %}
                {% endfor %}
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}